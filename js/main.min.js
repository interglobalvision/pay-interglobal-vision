Site={mobileThreshold:601,init:function(){var e=this;e.Stripe.init(),$(window).resize(function(){e.onResize()})},onResize:function(){},fixWidows:function(){$(".js-fix-widows").each(function(){var e=$(this).html();e=e.replace(/ ([^ ]*)$/,"&nbsp;$1"),$(this).html(e)})}},Site.Stripe={$form:$("#payment-form"),init:function(){var e=this;Stripe.setPublishableKey("pk_test_QJv0NVjinlteY6ji0HOrah9n"),e.createToken()},createToken:function(){var e=this;e.$form.submit(function(i){return $("#payment-response").removeClass("show approved declined").html("&nbsp;"),e.$form.find(".submit").prop("disabled",!0),Stripe.card.createToken(e.$form,e.stripeResponseHandler.bind(e)),!1})},stripeResponseHandler:function(e,i){var s=this;if(i.error)$("#payment-response").addClass("show declined").html(i.error.message),s.$form.find(".submit").prop("disabled",!1);else{var n=i.id;s.$form.append($('<input type="hidden" name="stripeToken">').val(n));var r=JSON.stringify(s.$form.serializeArray()),t=$.ajax({url:"charge.php",method:"POST",data:{form:r}});t.done(function(e){s.$form.find(".submit").prop("disabled",!1);var i;if("authorized"==e)i="authorized",responseMessage="Your payment has been authorized. Thank you.";else if("manual_review"==e)i="authorized",responseMessage="Your payment is in review. We will contact you at the provided email if any further action is required. Thank you.";else try{var n=JSON.parse(e);i="declined",responseMessage=n.message}catch(r){i="declined",responseMessage=e}$("#payment-response").addClass("show "+i).html(responseMessage)}),t.fail(function(e,i){s.$form.find(".submit").prop("disabled",!1),$("#payment-response").addClass("show declined").html(i+". Please try again.")})}}},jQuery(document).ready(function(){"use strict";Site.init()});
//# sourceMappingURL=/main.min.js.map