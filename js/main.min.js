Site={mobileThreshold:601,init:function(){var e=this;e.Stripe.init(),$(window).resize(function(){})},onResize:function(){},fixWidows:function(){$(".js-fix-widows").each(function(){var e=$(this).html();e=e.replace(/ ([^ ]*)$/,"&nbsp;$1"),$(this).html(e)})}},Site.Stripe={$form:$("#payment-form"),init:function(){var e=this;Stripe.setPublishableKey("pk_live_1iLay9wxJyeywHOFX4Q9kMtl"),e.createToken()},createToken:function(){var e=this;e.$form.submit(function(){return $("#payment-response").removeClass("show approved declined").html("&nbsp;"),e.$form.find(".submit").prop("disabled",!0),Stripe.card.createToken(e.$form,e.stripeResponseHandler.bind(e)),!1})},stripeResponseHandler:function(e,i){var n=this;if(i.error)$("#payment-response").addClass("show declined").html(i.error.message),n.$form.find(".submit").prop("disabled",!1);else{var r=i.id;n.$form.append($('<input id="stripeToken" type="hidden" name="stripeToken">').val(r));var t=JSON.stringify(n.$form.serializeArray()),a=$.ajax({url:"charge.php",method:"POST",data:{form:t}});a.done(function(e){var i,r;if("authorized"===e)n.$form.find("input[name=amount]").val(""),i="authorized",r="Your payment has been authorized. Thank you.";else if("manual_review"===e)n.$form.find("input[name=amount]").val(""),i="authorized",r="Your payment is in review. We will contact you at the provided email if any further action is required. Thank you.";else try{var t=JSON.parse(e);i="declined",r=t.message}catch(a){i="declined",r=e}$("#payment-response").addClass("show "+i).html(r),$("#stripeToken").remove(),n.$form.find(".submit").prop("disabled",!1)}),a.fail(function(e,i){n.$form.find(".submit").prop("disabled",!1),$("#payment-response").addClass("show declined").html(i+". Please try again.")})}}},jQuery(document).ready(function(){"use strict";Site.init()});
//# sourceMappingURL=/main.min.js.map